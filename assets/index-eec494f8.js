import{_ as Z,u as ee,a as te}from"./index-778cf4f8.js";/* empty css                   *//* empty css               *//* empty css                  *//* empty css                     *//* empty css               *//* empty css                      *//* empty css                        *//* empty css                    */import{r as _,b as q,ae,l as h,B as le,C,F as e,G as a,a1 as oe,u as y,p as B,S as ne,af as se,E as g,a5 as re,K as ue,an as ie,aK as de,M as pe,ai as me,aL as D,O as r,as as ce,D as T,J as _e,a2 as ge,al as fe,am as ye,a6 as ve,ao as be,ah as Ve,ax as we,ay as ke,a7 as he}from"./element-plus-b8725afa.js";import{g as Ce,d as xe,u as Ee,c as Se}from"./agent-c7987083.js";const Ue={class:"agent-container"},ze={class:"filter-container"},Me={class:"pagination"},qe={class:"dialog-footer"},Be={__name:"index",setup(De){const A=ee(),F=te(),x=_([]),E=_(0),v=_(!1),s=q({page:1,pageSize:10,keyword:"",status:""}),m=_(!1),b=_(""),V=_(),n=q({id:void 0,password:"",company_name:"",contact_name:"",contact_phone:"",contact_email:"",seller:"",status:"启用",remark:""}),L={company_name:[{required:!0,message:"请输入企业名称",trigger:"blur"}],contact_name:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contact_phone:[{required:!0,message:"请输入联系人手机号",trigger:"blur"}],contact_email:[{required:!1,message:"请输入联系人邮箱",trigger:"blur"}],seller:[{required:!0,message:"请输入销售员姓名",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},c=async()=>{v.value=!0;try{const{data:o}=await Ce(s);x.value=o.list,E.value=o.total}catch(o){console.error("获取渠道列表失败:",o),g.error("获取渠道列表失败")}finally{v.value=!1}},S=()=>{s.page=1,c()},$=()=>{b.value="新增渠道",m.value=!0,Object.assign(n,{id:void 0,password:"",company_name:"",contact_name:"",contact_phone:"",contact_email:"",seller:"",status:"启用",remark:""})},I=o=>{b.value="修改渠道",m.value=!0,Object.assign(n,{id:o.id,password:"",company_name:o.company_name,contact_name:o.contact_name,contact_phone:o.contact_phone,contact_email:o.contact_email,seller:o.seller,status:o.status,remark:o.remark})},K=o=>{A.push(`/agent/detail/${o.id}`)},N=o=>{_e.confirm("确认要删除该渠道吗？","警告",{type:"warning"}).then(async()=>{try{await xe(o.id),g.success("删除成功"),c()}catch(t){console.error("删除渠道失败:",t),g.error("删除失败")}})},O=async()=>{V.value&&await V.value.validate(async o=>{if(o)try{n.id?(await Ee(n.id,n),g.success("编辑成功")):(await Se(n),g.success("新增成功")),m.value=!1,c()}catch(t){console.error("提交表单失败:",t),g.error("操作失败")}})},P=o=>{s.pageSize=o,c()},R=o=>{s.page=o,c()},j=o=>({启用:"success",禁用:"info"})[o]||"info",Q=o=>({未认证:"info",管理员资料已提交:"warning",企业基本资料已提交:"warning",已提交待审核:"warning",审核通过:"success",审核不通过:"danger",人工初审通过:"primary"})[o]||"info";return ae(()=>{c()}),(o,t)=>{const w=ge,i=re,d=ue,p=fe,U=ye,G=ie,J=de,u=ve,f=be,k=Ve,z=we,H=ke,W=he,X=pe,Y=me;return h(),le("div",Ue,[C("div",ze,[e(i,{modelValue:s.keyword,"onUpdate:modelValue":t[0]||(t[0]=l=>s.keyword=l),placeholder:"渠道名称/联系人/销售员/统一社会信用代码",style:{width:"450px !important"},class:"filter-item search-input",onKeyup:oe(S,["enter","native"])},{prefix:a(()=>[e(w,null,{default:a(()=>[e(y(D))]),_:1})]),_:1},8,["modelValue"]),e(d,{class:"filter-item",type:"primary",onClick:S,style:{"margin-left":"10px"}},{default:a(()=>[e(w,null,{default:a(()=>[e(y(D))]),_:1}),t[13]||(t[13]=r(" 搜索 "))]),_:1,__:[13]}),y(F).operationManagerPrivate?(h(),B(d,{key:0,class:"filter-item",type:"primary",onClick:$,style:{"margin-left":"10px"}},{default:a(()=>[e(w,null,{default:a(()=>[e(y(ce))]),_:1}),t[14]||(t[14]=r(" 新增渠道 "))]),_:1,__:[14]})):ne("",!0)]),se((h(),B(G,{data:x.value,border:"",fit:"","highlight-current-row":"",style:{width:"100%"}},{default:a(()=>[e(p,{prop:"company_name",label:"企业名称","min-width":"180","show-overflow-tooltip":""}),e(p,{prop:"username",label:"用户名",width:"120"}),e(p,{prop:"contact_name",label:"联系人",width:"100"}),e(p,{prop:"contact_phone",label:"联系电话",width:"130"}),e(p,{prop:"status",label:"状态",width:"100"},{default:a(({row:l})=>[e(U,{type:j(l.status)},{default:a(()=>[r(T(l.status),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"audit_status",label:"认证状态",width:"120"},{default:a(({row:l})=>[e(U,{type:Q(l.audit_status),size:"small"},{default:a(()=>[r(T(l.audit_status||"未认证"),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"操作",width:"220",fixed:"right"},{default:a(({row:l})=>[e(d,{type:"primary",link:"",onClick:M=>K(l)},{default:a(()=>t[15]||(t[15]=[r("详情")])),_:2,__:[15]},1032,["onClick"]),e(d,{type:"warning",link:"",onClick:M=>I(l)},{default:a(()=>t[16]||(t[16]=[r("编辑")])),_:2,__:[16]},1032,["onClick"]),e(d,{type:"danger",link:"",onClick:M=>N(l)},{default:a(()=>t[17]||(t[17]=[r("删除")])),_:2,__:[17]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Y,v.value]]),C("div",Me,[e(J,{"current-page":s.page,"onUpdate:currentPage":t[1]||(t[1]=l=>s.page=l),"page-size":s.pageSize,"onUpdate:pageSize":t[2]||(t[2]=l=>s.pageSize=l),"page-sizes":[10,20,50,100],total:E.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:P,onCurrentChange:R},null,8,["current-page","page-size","total"])]),e(X,{title:b.value,modelValue:m.value,"onUpdate:modelValue":t[12]||(t[12]=l=>m.value=l),width:"700px","close-on-click-modal":!1,"destroy-on-close":""},{footer:a(()=>[C("div",qe,[e(d,{onClick:t[11]||(t[11]=l=>m.value=!1)},{default:a(()=>t[19]||(t[19]=[r("取 消")])),_:1,__:[19]}),e(d,{type:"primary",onClick:O},{default:a(()=>t[20]||(t[20]=[r("确 定")])),_:1,__:[20]})])]),default:a(()=>[e(W,{ref_key:"agentFormRef",ref:V,model:n,rules:L,"label-width":"120px"},{default:a(()=>[e(u,{label:"用户名"},{default:a(()=>t[18]||(t[18]=[r("系统自动生成（例如：QD0001），不可修改")])),_:1,__:[18]}),e(u,{label:"密码",prop:"password"},{default:a(()=>[e(i,{modelValue:n.password,"onUpdate:modelValue":t[3]||(t[3]=l=>n.password=l),type:"password",placeholder:"请输入密码（新增时不填则默认123456）","show-password":""},null,8,["modelValue"])]),_:1}),e(u,{label:"企业名称",prop:"company_name"},{default:a(()=>[e(i,{modelValue:n.company_name,"onUpdate:modelValue":t[4]||(t[4]=l=>n.company_name=l),placeholder:"请输入企业名称"},null,8,["modelValue"])]),_:1}),e(k,{gutter:20},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(u,{label:"联系人姓名",prop:"contact_name"},{default:a(()=>[e(i,{modelValue:n.contact_name,"onUpdate:modelValue":t[5]||(t[5]=l=>n.contact_name=l),placeholder:"请输入联系人姓名"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:a(()=>[e(u,{label:"联系人手机",prop:"contact_phone"},{default:a(()=>[e(i,{modelValue:n.contact_phone,"onUpdate:modelValue":t[6]||(t[6]=l=>n.contact_phone=l),placeholder:"请输入联系人手机号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(k,{gutter:20},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(u,{label:"联系人邮箱",prop:"contact_email"},{default:a(()=>[e(i,{modelValue:n.contact_email,"onUpdate:modelValue":t[7]||(t[7]=l=>n.contact_email=l),placeholder:"请输入联系人邮箱"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{label:"销售员",prop:"seller"},{default:a(()=>[e(i,{modelValue:n.seller,"onUpdate:modelValue":t[8]||(t[8]=l=>n.seller=l),placeholder:"请输入销售员姓名电话（如：张三 13800138000）"},null,8,["modelValue"])]),_:1}),e(k,{gutter:20},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(u,{label:"状态",prop:"status"},{default:a(()=>[e(H,{modelValue:n.status,"onUpdate:modelValue":t[9]||(t[9]=l=>n.status=l),placeholder:"请选择状态",style:{width:"100%"}},{default:a(()=>[e(z,{label:"启用",value:"启用"}),e(z,{label:"禁用",value:"禁用"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{label:"备注",prop:"remark"},{default:a(()=>[e(i,{modelValue:n.remark,"onUpdate:modelValue":t[10]||(t[10]=l=>n.remark=l),type:"textarea",rows:3,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},je=Z(Be,[["__scopeId","data-v-678cb298"]]);export{je as default};
