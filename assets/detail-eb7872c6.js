import{_ as P,u as R,b as U}from"./index-520d6774.js";/* empty css                   *//* empty css                *//* empty css                             *//* empty css               *//* empty css                   *//* empty css                       */import{a as F,v as G,u as x}from"./agent-fe02a6d8.js";import{f as H}from"./format-20468769.js";import{L as J}from"./LogList-39ba1093.js";import{r as E,ae as K,l as d,B as O,C as D,F as t,G as a,af as j,p as _,E as s,aE as q,ag as Q,ai as W,O as r,S as c,D as u,u as B,J as v,K as X,az as Y,am as Z,aA as ee}from"./element-plus-e9590f8a.js";/* empty css                      *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                         */import"./log-c1ce3b23.js";const ae={class:"agent-detail"},te={class:"page-header"},le={class:"header-actions"},re={__name:"detail",setup(oe){const A=R(),w=U(),y=E(!1),e=E({}),p=async()=>{y.value=!0;try{const o=await F(w.params.id);e.value=o.data}catch(o){console.error("获取渠道详情失败:",o),s.error("获取渠道详情失败")}y.value=!1},M=()=>{A.back()},T=()=>{v.confirm("确认要为该渠道添加认证吗？","提示",{type:"warning"}).then(async()=>{try{await G(e.value.id),s.success("添加认证成功"),p()}catch(o){console.error("添加认证失败:",o),s.error("添加认证失败")}})},V=()=>{if(!e.value.verify_url){s.error("认证链接不存在");return}try{if(typeof window<"u"&&window.open)window.open(e.value.verify_url,"_blank");else{const o=document.createElement("a");o.href=e.value.verify_url,o.target="_blank",o.rel="noopener noreferrer",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}catch(o){console.error("打开认证链接失败:",o),s.error("无法打开认证链接，请手动复制链接访问")}},z=()=>{if(!e.value.verify_url){s.error("认证链接不存在");return}navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(e.value.verify_url).then(()=>{s.success("认证链接已复制到剪贴板")}).catch(o=>{console.error("使用 Clipboard API 复制失败:",o),h(e.value.verify_url)}):h(e.value.verify_url)},h=o=>{try{const l=document.createElement("textarea");l.value=o,l.style.position="fixed",l.style.left="-999999px",l.style.top="-999999px",document.body.appendChild(l),l.focus(),l.select();const i=document.execCommand("copy");if(document.body.removeChild(l),i)s.success("认证链接已复制到剪贴板");else throw new Error("execCommand 复制失败")}catch(l){console.error("复制失败:",l),v.alert(e.value.verify_url,"请手动复制认证链接",{confirmButtonText:"确定",type:"info"})}},I=o=>({启用:"success",禁用:"info"})[o]||"info",C=o=>({未认证:"info",管理员资料已提交:"warning",企业基本资料已提交:"warning",已提交待审核:"warning",审核通过:"success",审核不通过:"danger",人工初审通过:"primary"})[o]||"info",m=o=>{window.open(`/api/admin/fadada/download-url?uuid=${o}`,"_blank")},S=()=>{v.confirm("确认要禁用该渠道吗？禁用后渠道将无法正常使用系统。","警告",{type:"warning"}).then(async()=>{try{const o={username:e.value.username,company_name:e.value.company_name,contact_name:e.value.contact_name,contact_phone:e.value.contact_phone,contact_email:e.value.contact_email,seller:e.value.seller,status:"禁用",remark:e.value.remark};await x(e.value.id,o),s.success("渠道已禁用"),p()}catch(o){console.error("禁用渠道失败:",o),s.error("禁用渠道失败")}})},$=()=>{v.confirm("确认要启用该渠道吗？","提示",{type:"warning"}).then(async()=>{try{const o={username:e.value.username,company_name:e.value.company_name,contact_name:e.value.contact_name,contact_phone:e.value.contact_phone,contact_email:e.value.contact_email,seller:e.value.seller,status:"启用",remark:e.value.remark};await x(e.value.id,o),s.success("渠道已启用"),p()}catch(o){console.error("启用渠道失败:",o),s.error("启用渠道失败")}})};return K(()=>{p()}),(o,l)=>{const i=X,L=q,n=Y,g=Z,b=ee,f=Q,N=W;return d(),O("div",ae,[D("div",te,[t(L,{onBack:M,title:e.value.company_name||"渠道详情"},{extra:a(()=>[D("div",le,[e.value.customer_id?c("",!0):(d(),_(i,{key:0,type:"warning",onClick:T},{default:a(()=>l[4]||(l[4]=[r("实名认证")])),_:1,__:[4]})),e.value.verify_url&&e.value.audit_status==="未认证"?(d(),_(i,{key:1,type:"success",onClick:V},{default:a(()=>l[5]||(l[5]=[r("继续认证")])),_:1,__:[5]})):c("",!0),e.value.verify_url?(d(),_(i,{key:2,type:"info",onClick:z},{default:a(()=>l[6]||(l[6]=[r("复制认证链接")])),_:1,__:[6]})):c("",!0),e.value.status==="启用"?(d(),_(i,{key:3,type:"danger",onClick:S},{default:a(()=>l[7]||(l[7]=[r("禁用")])),_:1,__:[7]})):c("",!0),e.value.status==="禁用"?(d(),_(i,{key:4,type:"success",onClick:$},{default:a(()=>l[8]||(l[8]=[r("启用")])),_:1,__:[8]})):c("",!0)])]),_:1},8,["title"])]),j((d(),_(f,{class:"detail-card"},{default:a(()=>[t(b,{column:3,border:""},{default:a(()=>[t(n,{label:"用户名"},{default:a(()=>[r(u(e.value.username),1)]),_:1}),t(n,{label:"状态"},{default:a(()=>[t(g,{type:I(e.value.status)},{default:a(()=>[r(u(e.value.status),1)]),_:1},8,["type"])]),_:1}),t(n,{label:"企业名称",span:2},{default:a(()=>[r(u(e.value.company_name),1)]),_:1}),t(n,{label:"认证状态"},{default:a(()=>[t(g,{type:C(e.value.audit_status),size:"small"},{default:a(()=>[r(u(e.value.audit_status||"未认证"),1)]),_:1},8,["type"])]),_:1}),t(n,{label:"联系人"},{default:a(()=>[r(u(e.value.contact_name),1)]),_:1}),t(n,{label:"联系电话"},{default:a(()=>[r(u(e.value.contact_phone),1)]),_:1}),t(n,{label:"联系邮箱"},{default:a(()=>[r(u(e.value.contact_email),1)]),_:1}),t(n,{label:"销售员"},{default:a(()=>[r(u(e.value.seller),1)]),_:1}),t(n,{label:"创建时间"},{default:a(()=>[r(u(B(H)(e.value.created_at)),1)]),_:1}),t(n,{label:"备注",span:3},{default:a(()=>[r(u(e.value.remark||"无"),1)]),_:1})]),_:1})]),_:1})),[[N,y.value]]),t(f,{class:"detail-card"},{default:a(()=>[t(b,{column:3,border:""},{default:a(()=>[t(n,{label:"法大大客户ID"},{default:a(()=>[r(u(e.value.customer_id||"未生成"),1)]),_:1}),t(n,{label:"认证方式"},{default:a(()=>[r(u(e.value.verify_type||"未设置"),1)]),_:1}),t(n,{label:"统一社会信用代码"},{default:a(()=>[r(u(e.value.organization||"未填写"),1)]),_:1}),t(n,{label:"法人姓名"},{default:a(()=>[r(u(e.value.legal_name||"未填写"),1)]),_:1}),t(n,{label:"法人身份证号"},{default:a(()=>[r(u(e.value.legal||"未填写"),1)]),_:1}),t(n,{label:"法人手机号"},{default:a(()=>[r(u(e.value.legal_mobile||"未填写"),1)]),_:1}),t(n,{label:"企业邮箱"},{default:a(()=>[r(u(e.value.company_email||"未填写"),1)]),_:1}),t(n,{label:"组织类型"},{default:a(()=>[r(u(e.value.organization_type||"未设置"),1)]),_:1}),t(n,{label:"证件类型"},{default:a(()=>[r(u(e.value.certificates_type||"未设置"),1)]),_:1}),t(n,{label:"审核时间"},{default:a(()=>[r(u(e.value.auditor_time||"未审核"),1)]),_:1}),t(n,{label:"营业执照"},{default:a(()=>[e.value.organization_path?(d(),_(i,{key:0,type:"primary",onClick:l[0]||(l[0]=k=>m(e.value.organization_path))},{default:a(()=>l[9]||(l[9]=[r("查看")])),_:1,__:[9]})):c("",!0)]),_:1}),t(n,{label:"企业信息登记表"},{default:a(()=>[e.value.reg_form_path?(d(),_(i,{key:0,type:"primary",onClick:l[1]||(l[1]=k=>m(e.value.reg_form_path))},{default:a(()=>l[10]||(l[10]=[r("查看")])),_:1,__:[10]})):c("",!0)]),_:1})]),_:1})]),_:1}),t(f,{class:"detail-card"},{default:a(()=>[t(b,{column:3,border:""},{default:a(()=>[t(n,{label:"管理员类型"},{default:a(()=>[r(u(e.value.manager_type||"-"),1)]),_:1}),t(n,{label:"姓名"},{default:a(()=>[r(u(e.value.manager_name||"-"),1)]),_:1}),t(n,{label:"身份证号"},{default:a(()=>[r(u(e.value.manager_id_card||"-"),1)]),_:1}),t(n,{label:"手机号"},{default:a(()=>[r(u(e.value.manager_mobile||"-"),1)]),_:1}),t(n,{label:"身份证正面"},{default:a(()=>[e.value.manager_head_photo_path?(d(),_(i,{key:0,type:"primary",onClick:l[2]||(l[2]=k=>m(e.value.manager_head_photo_path))},{default:a(()=>l[11]||(l[11]=[r("查看")])),_:1,__:[11]})):c("",!0)]),_:1}),t(n,{label:"身份证反面"},{default:a(()=>[e.value.manager_background_path?(d(),_(i,{key:0,type:"primary",onClick:l[3]||(l[3]=k=>m(e.value.manager_background_path))},{default:a(()=>l[12]||(l[12]=[r("查看")])),_:1,__:[12]})):c("",!0)]),_:1}),t(n,{label:"审核时间"},{default:a(()=>[r(u(e.value.manager_auditor_time||"未审核"),1)]),_:1}),t(n,{label:"审核状态"},{default:a(()=>[t(g,{type:C(e.value.manager_audit_status)},{default:a(()=>[r(u(e.value.manager_audit_status||"未审核"),1)]),_:1},8,["type"])]),_:1})]),_:1})]),_:1}),t(f,{class:"detail-card"},{default:a(()=>[t(J,{"reference-id":B(w).params.id,"reference-type":o.agent,logs:e.value.logs||[],"show-filter":!1,"show-pagination":!1,"auto-load":!1},null,8,["reference-id","reference-type","logs"])]),_:1})])}}},Ce=P(re,[["__scopeId","data-v-e3ab9e20"]]);export{Ce as default};
