import{_ as Z,u as ee}from"./index-2c2925e9.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css               *//* empty css                      *//* empty css                        */import{r as f,b as D,ae,l as T,B as te,C as h,F as e,G as t,a1 as le,af as ne,p as oe,E as v,a5 as re,K as se,an as ie,aM as ue,M as de,ai as pe,u as E,aN as q,O as d,as as ce,D as M,J as me,a2 as _e,al as ge,am as fe,a6 as ve,ao as be,ah as ye,ax as Ve,ay as we,a7 as ke}from"./element-plus-f067b2d4.js";import{g as xe,c as Ce,u as he,d as Ee}from"./funder-7d3a49f0.js";const Ue={class:"funder-container"},ze={class:"filter-container"},Fe={class:"pagination"},Be={class:"dialog-footer"},De={__name:"index",setup(Te){const S=ee(),y=f([]),V=f(0),w=f(!0),r=D({page:1,page_size:20,keyword:""}),m=f(!1),k=f(""),x=f(""),s=f(null),n=D({id:void 0,code:"",name:"",contact_name:"",contact_phone:"",contact_email:"",bank_name:"",account_no:"",remark:"",is_recv_srv_fee:"否"}),$={code:[{required:!0,message:"请输入资金方编码",trigger:"blur"}],name:[{required:!0,message:"请输入资金方名称",trigger:"blur"}],contact_name:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contact_phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],contact_email:[{required:!0,message:"请输入联系邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],bank_name:[{required:!0,message:"请输入开户行名称",trigger:"blur"}],account_no:[{required:!0,message:"请输入银行账号",trigger:"blur"}]},_=async()=>{w.value=!0;try{const o=await xe(r);y.value=o.data.list,V.value=o.data.total}catch(o){console.error("获取资金方列表失败:",o),y.value=[],V.value=0,v({type:"error",message:"获取资金方列表失败"})}finally{w.value=!1}},U=()=>{r.page=1,_()},I=()=>{Object.assign(n,{id:void 0,code:"",name:"",contact_name:"",contact_phone:"",contact_email:"",bank_name:"",account_no:"",remark:"",is_recv_srv_fee:"否"})},L=()=>{I(),k.value="create",x.value="新增资金方",m.value=!0,s.value&&s.value.clearValidate()},N=async()=>{s.value&&await s.value.validate(async o=>{if(o)try{await Ce(n),await _(),m.value=!1,v({type:"success",message:"创建成功"})}catch(a){console.error("创建资金方失败:",a),v({type:"error",message:"创建资金方失败"})}})},O=o=>{Object.assign(n,o),k.value="update",x.value="编辑资金方",m.value=!0,s.value&&s.value.clearValidate()},j=async()=>{s.value&&await s.value.validate(async o=>{if(o){const a={...n};try{await he(a.id,a),await _(),m.value=!1,v({type:"success",message:"更新成功"})}catch(b){console.error("更新资金方失败:",b),v({type:"error",message:"更新失败"})}}})},K=async o=>{try{await me.confirm("确认删除该资金方?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await Ee(o.id),await _(),v({type:"success",message:"删除成功"})}catch(a){a!=="cancel"&&(console.error("删除资金方失败:",a),v({type:"error",message:"删除失败"}))}},P=o=>{r.page_size=o,_()},R=o=>{r.page=o,_()},A=o=>{S.push(`/funder/detail/${o.id}`)},G=o=>({未认证:"info",管理员资料已提交:"warning",企业基本资料已提交:"warning",已提交待审核:"warning",审核通过:"success",审核不通过:"danger",人工初审通过:"primary"})[o]||"info";return ae(()=>{y.value=[],_()}),(o,a)=>{const b=_e,i=re,g=se,p=ge,z=fe,J=ie,Q=ue,u=ve,c=be,C=ye,F=Ve,H=we,W=ke,X=de,Y=pe;return T(),te("div",Ue,[h("div",ze,[e(i,{modelValue:r.keyword,"onUpdate:modelValue":a[0]||(a[0]=l=>r.keyword=l),placeholder:"资金方名称/编码/联系人",style:{width:"450px !important"},class:"filter-item search-input",onKeyup:le(U,["enter","native"])},{prefix:t(()=>[e(b,null,{default:t(()=>[e(E(q))]),_:1})]),_:1},8,["modelValue"]),e(g,{class:"filter-item",type:"primary",onClick:U,style:{"margin-left":"10px"}},{default:t(()=>[e(b,null,{default:t(()=>[e(E(q))]),_:1}),a[15]||(a[15]=d(" 搜索 "))]),_:1,__:[15]}),e(g,{class:"filter-item",type:"primary",onClick:L,style:{"margin-left":"10px"}},{default:t(()=>[e(b,null,{default:t(()=>[e(E(ce))]),_:1}),a[16]||(a[16]=d(" 新增资金方 "))]),_:1,__:[16]})]),ne((T(),oe(J,{data:y.value,border:"",fit:"","highlight-current-row":"",style:{width:"100%"}},{default:t(()=>[e(p,{label:"名称",prop:"name",align:"left","min-width":"200"}),e(p,{label:"编码",prop:"code",align:"center",width:"100"}),e(p,{label:"联系人",prop:"contact_name",align:"center",width:"100"}),e(p,{label:"联系电话",prop:"contact_phone",align:"center",width:"120"}),e(p,{label:"联系邮箱",prop:"contact_email",align:"center",width:"180"}),e(p,{label:"代收服务费",align:"center",width:"100"},{default:t(({row:l})=>[e(z,{type:l.is_recv_srv_fee==="是"?"success":"info",size:"small"},{default:t(()=>[d(M(l.is_recv_srv_fee||"否"),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"认证状态",align:"center",width:"120"},{default:t(({row:l})=>[e(z,{type:G(l.audit_status),size:"small"},{default:t(()=>[d(M(l.audit_status||"未认证"),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"操作",align:"center",width:"200","class-name":"small-padding fixed-width"},{default:t(({row:l})=>[e(g,{type:"primary",link:"",onClick:B=>A(l)},{default:t(()=>a[17]||(a[17]=[d("详情")])),_:2,__:[17]},1032,["onClick"]),e(g,{type:"primary",link:"",onClick:B=>O(l)},{default:t(()=>a[18]||(a[18]=[d("编辑")])),_:2,__:[18]},1032,["onClick"]),e(g,{type:"danger",link:"",onClick:B=>K(l)},{default:t(()=>a[19]||(a[19]=[d("删除")])),_:2,__:[19]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Y,w.value]]),h("div",Fe,[e(Q,{"current-page":r.page,"onUpdate:currentPage":a[1]||(a[1]=l=>r.page=l),"page-size":r.page_size,"onUpdate:pageSize":a[2]||(a[2]=l=>r.page_size=l),"page-sizes":[10,20,50,100],total:V.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:P,onCurrentChange:R},null,8,["current-page","page-size","total"])]),e(X,{modelValue:m.value,"onUpdate:modelValue":a[14]||(a[14]=l=>m.value=l),title:x.value,width:"700px","close-on-click-modal":!1,draggable:"",class:"custom-dialog"},{footer:t(()=>[h("div",Be,[e(g,{onClick:a[12]||(a[12]=l=>m.value=!1)},{default:t(()=>a[20]||(a[20]=[d("取 消")])),_:1,__:[20]}),e(g,{type:"primary",onClick:a[13]||(a[13]=l=>k.value==="create"?N():j())},{default:t(()=>a[21]||(a[21]=[d(" 确 定 ")])),_:1,__:[21]})])]),default:t(()=>[e(W,{ref_key:"dataForm",ref:s,rules:$,model:n,"label-position":"right","label-width":"120px",class:"form-container"},{default:t(()=>[e(C,{gutter:20},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(u,{label:"编码",prop:"code"},{default:t(()=>[e(i,{modelValue:n.code,"onUpdate:modelValue":a[3]||(a[3]=l=>n.code=l),placeholder:"请输入资金方编码",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(u,{label:"公司名称",prop:"name"},{default:t(()=>[e(i,{modelValue:n.name,"onUpdate:modelValue":a[4]||(a[4]=l=>n.name=l),placeholder:"请输入资金方名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(u,{label:"联系人",prop:"contact_name"},{default:t(()=>[e(i,{modelValue:n.contact_name,"onUpdate:modelValue":a[5]||(a[5]=l=>n.contact_name=l),placeholder:"请输入联系人姓名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(u,{label:"联系电话",prop:"contact_phone"},{default:t(()=>[e(i,{modelValue:n.contact_phone,"onUpdate:modelValue":a[6]||(a[6]=l=>n.contact_phone=l),placeholder:"请输入联系电话",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(u,{label:"联系邮箱",prop:"contact_email"},{default:t(()=>[e(i,{modelValue:n.contact_email,"onUpdate:modelValue":a[7]||(a[7]=l=>n.contact_email=l),placeholder:"请输入联系邮箱",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,{gutter:20},{default:t(()=>[e(c,{span:24},{default:t(()=>[e(u,{label:"开户行",prop:"bank_name"},{default:t(()=>[e(i,{modelValue:n.bank_name,"onUpdate:modelValue":a[8]||(a[8]=l=>n.bank_name=l),placeholder:"请输入开户行名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:24},{default:t(()=>[e(u,{label:"银行账号",prop:"account_no"},{default:t(()=>[e(i,{modelValue:n.account_no,"onUpdate:modelValue":a[9]||(a[9]=l=>n.account_no=l),placeholder:"请输入银行账号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,{gutter:20},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(u,{label:"代收服务费",prop:"is_recv_srv_fee"},{default:t(()=>[e(H,{modelValue:n.is_recv_srv_fee,"onUpdate:modelValue":a[10]||(a[10]=l=>n.is_recv_srv_fee=l),placeholder:"请选择是否代收服务费",clearable:""},{default:t(()=>[e(F,{label:"是",value:"是"}),e(F,{label:"否",value:"否"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{label:"备注",prop:"remark"},{default:t(()=>[e(i,{modelValue:n.remark,"onUpdate:modelValue":a[11]||(a[11]=l=>n.remark=l),type:"textarea",rows:3,placeholder:"请输入备注信息",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ke=Z(De,[["__scopeId","data-v-8fa791f1"]]);export{Ke as default};
