import{_ as ae,u as te,a as le}from"./index-76be4761.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css               *//* empty css                      *//* empty css                        */import{r as f,b as B,ae as oe,l as E,B as ne,C as U,F as e,G as t,a1 as re,af as se,p as D,E as v,a5 as ue,K as ie,an as de,aS as pe,M as ce,ai as me,u as V,aT as q,O as d,as as _e,D as M,S as ge,J as fe,a2 as ve,al as be,am as ye,a6 as Ve,ao as we,ah as ke,ax as xe,ay as Ce,a7 as he}from"./element-plus-eb4b90a0.js";import{g as Ee,c as Ue,u as ze,d as Se}from"./funder-90c5d0d5.js";const Fe={class:"funder-container"},Te={class:"filter-container"},Be={class:"pagination"},De={class:"dialog-footer"},qe={__name:"index",setup(Me){const $=te(),I=le(),y=f([]),w=f(0),k=f(!0),r=B({page:1,page_size:20,keyword:""}),m=f(!1),x=f(""),C=f(""),s=f(null),o=B({id:void 0,code:"",name:"",contact_name:"",contact_phone:"",contact_email:"",bank_name:"",account_no:"",remark:"",is_recv_srv_fee:"否"}),L={code:[{required:!0,message:"请输入资金方编码",trigger:"blur"}],name:[{required:!0,message:"请输入资金方名称",trigger:"blur"}],contact_name:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contact_phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],contact_email:[{required:!0,message:"请输入联系邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],bank_name:[{required:!0,message:"请输入开户行名称",trigger:"blur"}],account_no:[{required:!0,message:"请输入银行账号",trigger:"blur"}]},_=async()=>{k.value=!0;try{const n=await Ee(r);y.value=n.data.list,w.value=n.data.total}catch(n){console.error("获取资金方列表失败:",n),y.value=[],w.value=0,v({type:"error",message:"获取资金方列表失败"})}finally{k.value=!1}},z=()=>{r.page=1,_()},N=()=>{Object.assign(o,{id:void 0,code:"",name:"",contact_name:"",contact_phone:"",contact_email:"",bank_name:"",account_no:"",remark:"",is_recv_srv_fee:"否"})},O=()=>{N(),x.value="create",C.value="新增资金方",m.value=!0,s.value&&s.value.clearValidate()},j=async()=>{s.value&&await s.value.validate(async n=>{if(n)try{await Ue(o),await _(),m.value=!1,v({type:"success",message:"创建成功"})}catch(a){console.error("创建资金方失败:",a),v({type:"error",message:"创建资金方失败"})}})},K=n=>{Object.assign(o,n),x.value="update",C.value="编辑资金方",m.value=!0,s.value&&s.value.clearValidate()},P=async()=>{s.value&&await s.value.validate(async n=>{if(n){const a={...o};try{await ze(a.id,a),await _(),m.value=!1,v({type:"success",message:"更新成功"})}catch(b){console.error("更新资金方失败:",b),v({type:"error",message:"更新失败"})}}})},R=async n=>{try{await fe.confirm("确认删除该资金方?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await Se(n.id),await _(),v({type:"success",message:"删除成功"})}catch(a){a!=="cancel"&&(console.error("删除资金方失败:",a),v({type:"error",message:"删除失败"}))}},A=n=>{r.page_size=n,_()},G=n=>{r.page=n,_()},J=n=>{$.push(`/funder/detail/${n.id}`)},Q=n=>({未认证:"info",管理员资料已提交:"warning",企业基本资料已提交:"warning",已提交待审核:"warning",审核通过:"success",审核不通过:"danger",人工初审通过:"primary"})[n]||"info";return oe(()=>{y.value=[],_()}),(n,a)=>{const b=ve,u=ue,g=ie,p=be,S=ye,H=de,W=pe,i=Ve,c=we,h=ke,F=xe,X=Ce,Y=he,Z=ce,ee=me;return E(),ne("div",Fe,[U("div",Te,[e(u,{modelValue:r.keyword,"onUpdate:modelValue":a[0]||(a[0]=l=>r.keyword=l),placeholder:"资金方名称/编码/联系人",style:{width:"450px !important"},class:"filter-item search-input",onKeyup:re(z,["enter","native"])},{prefix:t(()=>[e(b,null,{default:t(()=>[e(V(q))]),_:1})]),_:1},8,["modelValue"]),e(g,{class:"filter-item",type:"primary",onClick:z,style:{"margin-left":"10px"}},{default:t(()=>[e(b,null,{default:t(()=>[e(V(q))]),_:1}),a[15]||(a[15]=d(" 搜索 "))]),_:1,__:[15]}),e(g,{class:"filter-item",type:"primary",onClick:O,style:{"margin-left":"10px"}},{default:t(()=>[e(b,null,{default:t(()=>[e(V(_e))]),_:1}),a[16]||(a[16]=d(" 新增资金方 "))]),_:1,__:[16]})]),se((E(),D(H,{data:y.value,border:"",fit:"","highlight-current-row":"",style:{width:"100%"}},{default:t(()=>[e(p,{label:"名称",prop:"name",align:"left","min-width":"200"}),e(p,{label:"编码",prop:"code",align:"center",width:"100"}),e(p,{label:"联系人",prop:"contact_name",align:"center",width:"100"}),e(p,{label:"联系电话",prop:"contact_phone",align:"center",width:"120"}),e(p,{label:"联系邮箱",prop:"contact_email",align:"center",width:"180"}),e(p,{label:"代收服务费",align:"center",width:"100"},{default:t(({row:l})=>[e(S,{type:l.is_recv_srv_fee==="是"?"success":"info",size:"small"},{default:t(()=>[d(M(l.is_recv_srv_fee||"否"),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"认证状态",align:"center",width:"120"},{default:t(({row:l})=>[e(S,{type:Q(l.audit_status),size:"small"},{default:t(()=>[d(M(l.audit_status||"未认证"),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"操作",align:"center",width:"200","class-name":"small-padding fixed-width"},{default:t(({row:l})=>[e(g,{type:"primary",link:"",onClick:T=>J(l)},{default:t(()=>a[17]||(a[17]=[d("详情")])),_:2,__:[17]},1032,["onClick"]),e(g,{type:"primary",link:"",onClick:T=>K(l)},{default:t(()=>a[18]||(a[18]=[d("编辑")])),_:2,__:[18]},1032,["onClick"]),V(I).superPrivate?(E(),D(g,{key:0,type:"danger",link:"",onClick:T=>R(l)},{default:t(()=>a[19]||(a[19]=[d("删除")])),_:2,__:[19]},1032,["onClick"])):ge("",!0)]),_:1})]),_:1},8,["data"])),[[ee,k.value]]),U("div",Be,[e(W,{"current-page":r.page,"onUpdate:currentPage":a[1]||(a[1]=l=>r.page=l),"page-size":r.page_size,"onUpdate:pageSize":a[2]||(a[2]=l=>r.page_size=l),"page-sizes":[10,20,50,100],total:w.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:A,onCurrentChange:G},null,8,["current-page","page-size","total"])]),e(Z,{modelValue:m.value,"onUpdate:modelValue":a[14]||(a[14]=l=>m.value=l),title:C.value,width:"700px","close-on-click-modal":!1,draggable:"",class:"custom-dialog"},{footer:t(()=>[U("div",De,[e(g,{onClick:a[12]||(a[12]=l=>m.value=!1)},{default:t(()=>a[20]||(a[20]=[d("取 消")])),_:1,__:[20]}),e(g,{type:"primary",onClick:a[13]||(a[13]=l=>x.value==="create"?j():P())},{default:t(()=>a[21]||(a[21]=[d(" 确 定 ")])),_:1,__:[21]})])]),default:t(()=>[e(Y,{ref_key:"dataForm",ref:s,rules:L,model:o,"label-position":"right","label-width":"120px",class:"form-container"},{default:t(()=>[e(h,{gutter:20},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(i,{label:"编码",prop:"code"},{default:t(()=>[e(u,{modelValue:o.code,"onUpdate:modelValue":a[3]||(a[3]=l=>o.code=l),placeholder:"请输入资金方编码",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(i,{label:"公司名称",prop:"name"},{default:t(()=>[e(u,{modelValue:o.name,"onUpdate:modelValue":a[4]||(a[4]=l=>o.name=l),placeholder:"请输入资金方名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(i,{label:"联系人",prop:"contact_name"},{default:t(()=>[e(u,{modelValue:o.contact_name,"onUpdate:modelValue":a[5]||(a[5]=l=>o.contact_name=l),placeholder:"请输入联系人姓名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(i,{label:"联系电话",prop:"contact_phone"},{default:t(()=>[e(u,{modelValue:o.contact_phone,"onUpdate:modelValue":a[6]||(a[6]=l=>o.contact_phone=l),placeholder:"请输入联系电话",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(i,{label:"联系邮箱",prop:"contact_email"},{default:t(()=>[e(u,{modelValue:o.contact_email,"onUpdate:modelValue":a[7]||(a[7]=l=>o.contact_email=l),placeholder:"请输入联系邮箱",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{gutter:20},{default:t(()=>[e(c,{span:24},{default:t(()=>[e(i,{label:"开户行",prop:"bank_name"},{default:t(()=>[e(u,{modelValue:o.bank_name,"onUpdate:modelValue":a[8]||(a[8]=l=>o.bank_name=l),placeholder:"请输入开户行名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:24},{default:t(()=>[e(i,{label:"银行账号",prop:"account_no"},{default:t(()=>[e(u,{modelValue:o.account_no,"onUpdate:modelValue":a[9]||(a[9]=l=>o.account_no=l),placeholder:"请输入银行账号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{gutter:20},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(i,{label:"代收服务费",prop:"is_recv_srv_fee"},{default:t(()=>[e(X,{modelValue:o.is_recv_srv_fee,"onUpdate:modelValue":a[10]||(a[10]=l=>o.is_recv_srv_fee=l),placeholder:"请选择是否代收服务费",clearable:""},{default:t(()=>[e(F,{label:"是",value:"是"}),e(F,{label:"否",value:"否"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{label:"备注",prop:"remark"},{default:t(()=>[e(u,{modelValue:o.remark,"onUpdate:modelValue":a[11]||(a[11]=l=>o.remark=l),type:"textarea",rows:3,placeholder:"请输入备注信息",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ae=ae(qe,[["__scopeId","data-v-c55fb165"]]);export{Ae as default};
