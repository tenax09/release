import{r as $,_ as A,u as J}from"./index-78e7e5a9.js";/* empty css               *//* empty css               *//* empty css                 *//* empty css                         *//* empty css                        *//* empty css                     *//* empty css                */import{f as P}from"./format-20468769.js";import{r as b,ae as U,af as W,l as i,B as v,C as t,F as a,G as e,ag as Y,ah as Z,ai as tt,u as y,Q as S,O as u,D as l,S as x,aj as V,V as st,ak as at,p as C,H as et,I as ot,X as nt,$ as lt,a2 as dt,K as it,al as rt,am as ct,an as _t,ao as ut,ap as mt,aq as vt,ar as pt,as as ht,at as ft,au as yt}from"./element-plus-e0a6c12c.js";function gt(){return $({url:"/api/admin/dashboard",method:"get"})}const bt={class:"dashboard-container"},wt={class:"stats-grid"},kt={class:"stat-content"},Et={class:"stat-header"},xt={class:"title"},Ct={key:0,class:"today"},Tt={class:"stat-main"},Dt={class:"main-number"},Lt={class:"stat-footer"},Nt={class:"amount"},Bt={class:"highlight"},It={key:0,class:"today-amount"},St={class:"stat-content"},Vt={class:"stat-header"},zt={class:"title"},Mt={key:0,class:"today"},Ft={class:"stat-main"},Ot={class:"main-number"},qt={class:"stat-footer"},Rt={class:"status-item"},jt={class:"value warning"},Gt={class:"status-item"},Ht={class:"value success"},Kt={class:"stat-content"},Qt={class:"stat-header"},Xt={class:"title"},$t={class:"stat-main"},At={class:"main-number"},Jt={class:"stat-content"},Pt={class:"stat-header"},Ut={class:"title"},Wt={class:"status-list"},Yt={class:"status-row"},Zt={class:"status-value"},ts={class:"status-row"},ss={class:"status-value"},as={class:"status-row"},es={class:"status-value"},os={class:"activity-section"},ns={class:"card-header"},ls={class:"premium"},ds={class:"card-header"},is={class:"timeline-container"},rs={class:"timeline-content"},cs={class:"log-main"},_s={class:"log-meta"},us={class:"operator"},ms={key:1,class:"empty-state"},vs={__name:"index",setup(ps){const T=J(),d=b({}),D=b([]),w=b([]),k=b(!0),E=n=>n?Number(n).toFixed(2):"0.00",r=n=>n?Number(n).toLocaleString():"0",z=n=>({create:ht,update:V,delete:ft,audit:yt})[n]||S,M=async()=>{try{k.value=!0;const{data:n}=await gt();d.value=n,D.value=n.latest_orders||[],w.value=n.latest_logs||[]}catch(n){console.error("获取数据失败:",n)}finally{k.value=!1}},F=n=>({待审核:"warning",待复审:"warning",待资方签约:"info",待客户签约:"info",待收前置款:"warning",待放款:"warning",已放款:"success",还款中:"primary",已结清:"success"})[n]||"info",L=n=>({create:"success",update:"warning",delete:"danger",audit:"primary"})[n]||"info",O=()=>{T.push("/order")},q=()=>{T.push("/log")};return U(()=>{M()}),(n,s)=>{const p=dt,m=Y,N=it,g=rt,R=ct,j=_t,B=ut,G=mt,H=vt,K=pt,Q=Z,X=tt;return W((i(),v("div",bt,[t("div",wt,[a(m,{class:"stat-card orders",shadow:"hover"},{default:e(()=>{var o,c,_,h,f,I;return[t("div",kt,[t("div",Et,[t("div",xt,[a(p,{class:"header-icon"},{default:e(()=>[a(y(S))]),_:1}),s[0]||(s[0]=u(" 订单总览 "))]),(((o=d.value.order_stats)==null?void 0:o.today_orders)||0)>0?(i(),v("div",Ct," 今日: +"+l(((c=d.value.order_stats)==null?void 0:c.today_orders)||0),1)):x("",!0)]),t("div",Tt,[t("div",Dt,l(r((_=d.value.order_stats)==null?void 0:_.total_orders)),1),s[1]||(s[1]=t("div",{class:"main-label"},"总订单数",-1))]),t("div",Lt,[t("div",Nt,[s[2]||(s[2]=u(" 总保费：")),t("span",Bt,"¥"+l(E((h=d.value.order_stats)==null?void 0:h.total_amount)),1)]),(((f=d.value.order_stats)==null?void 0:f.today_amount)||0)>0?(i(),v("div",It," 今日：¥"+l(E((I=d.value.order_stats)==null?void 0:I.today_amount)),1)):x("",!0)])])]}),_:1}),a(m,{class:"stat-card contracts",shadow:"hover"},{default:e(()=>{var o,c,_,h,f;return[t("div",St,[t("div",Vt,[t("div",zt,[a(p,{class:"header-icon"},{default:e(()=>[a(y(V))]),_:1}),s[3]||(s[3]=u(" 合同总览 "))]),(((o=d.value.contract_stats)==null?void 0:o.today_contracts)||0)>0?(i(),v("div",Mt," 今日: +"+l(((c=d.value.contract_stats)==null?void 0:c.today_contracts)||0),1)):x("",!0)]),t("div",Ft,[t("div",Ot,l(r((_=d.value.contract_stats)==null?void 0:_.total_contracts)),1),s[4]||(s[4]=t("div",{class:"main-label"},"总合同数",-1))]),t("div",qt,[t("div",Rt,[s[5]||(s[5]=t("span",{class:"label"},"待签署",-1)),t("span",jt,l(r((h=d.value.contract_stats)==null?void 0:h.unsigned_contracts)),1)]),t("div",Gt,[s[6]||(s[6]=t("span",{class:"label"},"已签署",-1)),t("span",Ht,l(r((f=d.value.contract_stats)==null?void 0:f.signed_contracts)),1)])])])]}),_:1}),a(m,{class:"stat-card users",shadow:"hover"},{default:e(()=>{var o;return[t("div",Kt,[t("div",Qt,[t("div",Xt,[a(p,{class:"header-icon"},{default:e(()=>[a(y(st))]),_:1}),s[7]||(s[7]=u(" 用户总览 "))])]),t("div",$t,[t("div",At,l(r((o=d.value.count_stats)==null?void 0:o.total_users)),1),s[8]||(s[8]=t("div",{class:"main-label"},"注册用户数",-1))])])]}),_:1}),a(m,{class:"stat-card status",shadow:"hover"},{default:e(()=>{var o,c,_;return[t("div",Jt,[t("div",Pt,[t("div",Ut,[a(p,{class:"header-icon"},{default:e(()=>[a(y(at))]),_:1}),s[9]||(s[9]=u(" 订单状态分布 "))])]),t("div",Wt,[t("div",Yt,[s[10]||(s[10]=t("div",{class:"status-label"},[t("div",{class:"dot warning"}),t("span",null,"待审核")],-1)),t("div",Zt,l(r((o=d.value.order_stats)==null?void 0:o.pending_orders)),1)]),t("div",ts,[s[11]||(s[11]=t("div",{class:"status-label"},[t("div",{class:"dot info"}),t("span",null,"处理中")],-1)),t("div",ss,l(r((c=d.value.order_stats)==null?void 0:c.process_orders)),1)]),t("div",as,[s[12]||(s[12]=t("div",{class:"status-label"},[t("div",{class:"dot success"}),t("span",null,"已完成")],-1)),t("div",es,l(r((_=d.value.order_stats)==null?void 0:_.complete_orders)),1)])])])]}),_:1})]),t("div",os,[a(Q,{gutter:20},{default:e(()=>[a(B,{span:12},{default:e(()=>[a(m,{shadow:"hover",class:"activity-card"},{header:e(()=>[t("div",ns,[s[14]||(s[14]=t("span",null,"最新订单",-1)),a(N,{type:"primary",link:"",onClick:O},{default:e(()=>s[13]||(s[13]=[u("查看更多")])),_:1,__:[13]})])]),default:e(()=>[a(j,{data:D.value,style:{width:"100%"},"empty-text":"暂无订单数据"},{default:e(()=>[a(g,{prop:"order_no",label:"订单号",width:"180","show-overflow-tooltip":""}),a(g,{prop:"insurance_type",label:"保险类型",width:"120"}),a(g,{prop:"total_premium",label:"保费",width:"120"},{default:e(({row:o})=>[t("span",ls,"¥"+l(E(o.total_premium)),1)]),_:1}),a(g,{prop:"status",label:"状态"},{default:e(({row:o})=>[a(R,{type:F(o.status),size:"small"},{default:e(()=>[u(l(o.status),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),a(B,{span:12},{default:e(()=>[a(m,{shadow:"hover",class:"activity-card"},{header:e(()=>[t("div",ds,[s[16]||(s[16]=t("span",null,"操作日志",-1)),a(N,{type:"primary",link:"",onClick:q},{default:e(()=>s[15]||(s[15]=[u("查看更多")])),_:1,__:[15]})])]),default:e(()=>[t("div",is,[w.value.length>0?(i(),C(H,{key:0},{default:e(()=>[(i(!0),v(et,null,ot(w.value,o=>(i(),C(G,{key:o.id,type:L(o.action),size:"small"},{dot:e(()=>[a(p,{class:nt(["timeline-icon",L(o.action)])},{default:e(()=>[(i(),C(lt(z(o.action))))]),_:2},1032,["class"])]),default:e(()=>[t("div",rs,[t("div",cs,l(o.content),1),t("div",_s,[t("span",null,l(y(P)(o.created_at)),1),t("span",us,"操作人："+l(o.admin_name||"系统"),1)])])]),_:2},1032,["type"]))),128))]),_:1})):(i(),v("div",ms,[a(K,{description:"暂无操作日志","image-size":80})]))])]),_:1})]),_:1})]),_:1})])])),[[X,k.value]])}}},Ts=A(vs,[["__scopeId","data-v-63b9f426"]]);export{Ts as default};
