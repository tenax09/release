import{r as T,_ as U}from"./index-fb629b40.js";/* empty css               *//* empty css                      *//* empty css                  *//* empty css                     *//* empty css                        */import{b as D,r as m,ae as j,l as w,B as I,C as x,F as e,G as o,a1 as K,af as P,p as Q,ay as A,a5 as O,K as F,an as G,aQ as R,ai as H,u as d,V as J,aR as W,O as i,aS as X,D as g,ax as Y,a2 as Z,al as $,am as ee}from"./element-plus-7a23ae0b.js";import{f as ae}from"./format-20468769.js";function te(f){return T({url:"/api/admin/logs",method:"get",params:f})}const le={class:"log-container"},ne={class:"filter-container"},oe={class:"pagination"},se={__name:"index",setup(f){const a=D({page:1,page_size:20,module:"",action:"",admin_name:""}),v=m([]),b=m(0),c=m(!1),u=async()=>{c.value=!0;try{const t=await te(a);v.value=t.data.list,b.value=t.data.total}catch(t){console.error("获取日志列表失败:",t)}c.value=!1},p=()=>{a.page=1,u()},V=()=>{a.module="",a.action="",a.admin_name="",p()},z=t=>{a.page_size=t,u()},C=t=>{a.page=t,u()},E=t=>({user:"用户管理",order:"订单管理",funder:"资金方管理",bank:"银行账户",admin:"管理员"})[t]||t,k=t=>({audit_pass:"审核通过",audit_reject:"审核拒绝",audit_pending:"待审核",review:"审核",create:"创建",update:"更新",delete:"删除",query:"查询"})[t]||t,B=t=>{switch(t){case"audit_pass":return"success";case"audit_reject":return"danger";case"audit_pending":return"warning";case"review":return"success";case"create":return"success";case"update":return"warning";case"delete":return"danger";case"query":return"info";default:return"info"}};return j(()=>{u()}),(t,l)=>{const s=Y,y=A,_=Z,M=O,h=F,r=$,S=ee,q=G,L=R,N=H;return w(),I("div",le,[x("div",ne,[e(y,{modelValue:a.module,"onUpdate:modelValue":l[0]||(l[0]=n=>a.module=n),placeholder:"操作模块",clearable:"",class:"filter-item",style:{width:"130px"}},{default:o(()=>[e(s,{label:"用户管理",value:"user"}),e(s,{label:"订单管理",value:"order"}),e(s,{label:"资金方管理",value:"funder"}),e(s,{label:"银行账户",value:"bank"}),e(s,{label:"管理员",value:"admin"})]),_:1},8,["modelValue"]),e(y,{modelValue:a.action,"onUpdate:modelValue":l[1]||(l[1]=n=>a.action=n),placeholder:"操作动作",clearable:"",class:"filter-item",style:{width:"130px"}},{default:o(()=>[e(s,{label:"创建",value:"create"}),e(s,{label:"更新",value:"update"}),e(s,{label:"删除",value:"delete"}),e(s,{label:"查询",value:"query"})]),_:1},8,["modelValue"]),e(M,{modelValue:a.admin_name,"onUpdate:modelValue":l[2]||(l[2]=n=>a.admin_name=n),placeholder:"操作人",style:{width:"200px"},class:"filter-item",onKeyup:K(p,["enter","native"])},{prefix:o(()=>[e(_,null,{default:o(()=>[e(d(J))]),_:1})]),_:1},8,["modelValue"]),e(h,{class:"filter-item",type:"primary",onClick:p},{default:o(()=>[e(_,null,{default:o(()=>[e(d(W))]),_:1}),l[5]||(l[5]=i(" 搜索 "))]),_:1,__:[5]}),e(h,{class:"filter-item",onClick:V},{default:o(()=>[e(_,null,{default:o(()=>[e(d(X))]),_:1}),l[6]||(l[6]=i(" 重置 "))]),_:1,__:[6]})]),P((w(),Q(q,{data:v.value,border:"",fit:"","highlight-current-row":"",style:{width:"100%"}},{default:o(()=>[e(r,{prop:"admin_name",label:"操作人",width:"120"}),e(r,{prop:"module",label:"操作模块",width:"120"},{default:o(({row:n})=>[i(g(E(n.module)),1)]),_:1}),e(r,{prop:"action",label:"操作动作",width:"120"},{default:o(({row:n})=>[e(S,{type:B(n.action)},{default:o(()=>[i(g(k(n.action)),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"content",label:"操作内容","show-overflow-tooltip":"",width:"560"}),e(r,{prop:"reference_type",label:"关联",width:"90"}),e(r,{prop:"created_at",label:"操作时间",width:"180"},{default:o(({row:n})=>[i(g(d(ae)(n.created_at)),1)]),_:1})]),_:1},8,["data"])),[[N,c.value]]),x("div",oe,[e(L,{"current-page":a.page,"onUpdate:currentPage":l[3]||(l[3]=n=>a.page=n),"page-size":a.page_size,"onUpdate:pageSize":l[4]||(l[4]=n=>a.page_size=n),"page-sizes":[10,20,50,100],total:b.value,background:!0,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:z,onCurrentChange:C},null,8,["current-page","page-size","total"])])])}}},ge=U(se,[["__scopeId","data-v-31d26a3f"]]);export{ge as default};
