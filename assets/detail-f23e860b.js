import{_ as H,u as P,b as R}from"./index-d036b99c.js";/* empty css                   *//* empty css                         *//* empty css                *//* empty css                             *//* empty css               *//* empty css                   *//* empty css                       */import{a as U,v as j}from"./funder-15655490.js";import{f as b}from"./format-20468769.js";import{u as q}from"./uuid2url-6c3b910f.js";import{r as E,ae as G,l as s,B,C as f,F as t,G as a,af as J,p as i,S as c,E as p,aE as K,ag as O,ai as Q,O as r,D as n,u as k,H as W,I as X,J as D,K as Y,az as Z,am as ee,aA as ae,ap as te,aq as le}from"./element-plus-b8725afa.js";const re={class:"funder-detail"},oe={class:"page-header"},ne={class:"header-actions"},ue={class:"log-content"},se={class:"operator"},ie={class:"action"},de={__name:"detail",setup(_e){const T=P(),I=R(),y=E(!1),e=E({}),w=async()=>{y.value=!0;try{const u=await U(I.params.id);e.value=u.data}catch(u){console.error("获取资金方详情失败:",u),p.error("获取资金方详情失败")}y.value=!1},M=()=>{T.back()},V=()=>{D.confirm("确认要为该资金方添加认证吗？","提示",{type:"warning"}).then(async()=>{try{await j(e.value.id),p.success("添加认证成功"),w()}catch(u){console.error("添加认证失败:",u),p.error("添加认证失败")}})},z=()=>{if(!e.value.verify_url){p.error("认证链接不存在");return}try{if(typeof window<"u"&&window.open)window.open(e.value.verify_url,"_blank");else{const u=document.createElement("a");u.href=e.value.verify_url,u.target="_blank",u.rel="noopener noreferrer",document.body.appendChild(u),u.click(),document.body.removeChild(u)}}catch(u){console.error("打开认证链接失败:",u),p.error("无法打开认证链接，请手动复制链接访问")}},A=()=>{if(!e.value.verify_url){p.error("认证链接不存在");return}navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(e.value.verify_url).then(()=>{p.success("认证链接已复制到剪贴板")}).catch(u=>{console.error("使用 Clipboard API 复制失败:",u),h(e.value.verify_url)}):h(e.value.verify_url)},h=u=>{try{const l=document.createElement("textarea");l.value=u,l.style.position="fixed",l.style.left="-999999px",l.style.top="-999999px",document.body.appendChild(l),l.focus(),l.select();const d=document.execCommand("copy");if(document.body.removeChild(l),d)p.success("认证链接已复制到剪贴板");else throw new Error("execCommand 复制失败")}catch(l){console.error("复制失败:",l),D.alert(e.value.verify_url,"请手动复制认证链接",{confirmButtonText:"确定",type:"info"})}},m=u=>{q(u).then(l=>{window.open(l,"_blank")})},C=u=>({未认证:"info",管理员资料已提交:"warning",企业基本资料已提交:"warning",已提交待审核:"warning",审核通过:"success",审核不通过:"danger",人工初审通过:"primary"})[u]||"info",F=u=>({create:"primary",update:"success",review:"warning",delete:"danger",audit_pass:"success",audit_reject:"danger",audit_pending:"warning",verify:"info"})[u]||"info";return G(()=>{w()}),(u,l)=>{const d=Y,N=K,o=Z,x=ee,g=ae,v=O,S=te,$=le,L=Q;return s(),B("div",re,[f("div",oe,[t(N,{onBack:M,title:e.value.company_name||e.value.name||"资金方详情"},{extra:a(()=>[f("div",ne,[e.value.customer_id?c("",!0):(s(),i(d,{key:0,type:"warning",onClick:V},{default:a(()=>l[4]||(l[4]=[r("实名认证")])),_:1,__:[4]})),e.value.verify_url&&e.value.audit_status==="未认证"?(s(),i(d,{key:1,type:"success",onClick:z},{default:a(()=>l[5]||(l[5]=[r("继续认证")])),_:1,__:[5]})):c("",!0),e.value.verify_url?(s(),i(d,{key:2,type:"info",onClick:A},{default:a(()=>l[6]||(l[6]=[r("复制认证链接")])),_:1,__:[6]})):c("",!0)])]),_:1},8,["title"])]),J((s(),i(v,{class:"detail-card"},{default:a(()=>[t(g,{column:3,border:""},{default:a(()=>[t(o,{label:"资金方编码"},{default:a(()=>[r(n(e.value.code),1)]),_:1}),t(o,{label:"资金方名称"},{default:a(()=>[r(n(e.value.name),1)]),_:1}),t(o,{label:"认证状态"},{default:a(()=>[t(x,{type:C(e.value.audit_status),size:"small"},{default:a(()=>[r(n(e.value.audit_status||"未认证"),1)]),_:1},8,["type"])]),_:1}),t(o,{label:"联系人"},{default:a(()=>[r(n(e.value.contact_name),1)]),_:1}),t(o,{label:"联系电话"},{default:a(()=>[r(n(e.value.contact_phone),1)]),_:1}),t(o,{label:"联系邮箱"},{default:a(()=>[r(n(e.value.contact_email),1)]),_:1}),t(o,{label:"开户行"},{default:a(()=>[r(n(e.value.bank_name),1)]),_:1}),t(o,{label:"开户人"},{default:a(()=>[r(n(e.value.account_name),1)]),_:1}),t(o,{label:"银行账号"},{default:a(()=>[r(n(e.value.account_no),1)]),_:1}),t(o,{label:"创建时间"},{default:a(()=>[r(n(k(b)(e.value.created_at)),1)]),_:1}),t(o,{label:"更新时间"},{default:a(()=>[r(n(k(b)(e.value.updated_at)),1)]),_:1}),t(o,{label:"备注",span:3},{default:a(()=>[r(n(e.value.remark||"无"),1)]),_:1})]),_:1})]),_:1})),[[L,y.value]]),t(v,{class:"detail-card"},{default:a(()=>[t(g,{column:3,border:""},{default:a(()=>[t(o,{label:"企业名称"},{default:a(()=>[r(n(e.value.company_name||"未填写"),1)]),_:1}),t(o,{label:"法大大客户ID"},{default:a(()=>[r(n(e.value.customer_id||"未生成"),1)]),_:1}),t(o,{label:"认证方式"},{default:a(()=>[r(n(e.value.verify_type||"未设置"),1)]),_:1}),t(o,{label:"统一社会信用代码"},{default:a(()=>[r(n(e.value.organization||"未填写"),1)]),_:1}),t(o,{label:"法人姓名"},{default:a(()=>[r(n(e.value.legal_name||"未填写"),1)]),_:1}),t(o,{label:"法人身份证号"},{default:a(()=>[r(n(e.value.legal||"未填写"),1)]),_:1}),t(o,{label:"法人手机号"},{default:a(()=>[r(n(e.value.legal_mobile||"未填写"),1)]),_:1}),t(o,{label:"企业邮箱"},{default:a(()=>[r(n(e.value.company_email||"未填写"),1)]),_:1}),t(o,{label:"组织类型"},{default:a(()=>[r(n(e.value.organization_type||"未设置"),1)]),_:1}),t(o,{label:"证件类型"},{default:a(()=>[r(n(e.value.certificates_type||"未设置"),1)]),_:1}),t(o,{label:"审核时间"},{default:a(()=>[r(n(e.value.auditor_time||"未审核"),1)]),_:1}),t(o,{label:"营业执照"},{default:a(()=>[e.value.organization_path?(s(),i(d,{key:0,type:"primary",onClick:l[0]||(l[0]=_=>m(e.value.organization_path))},{default:a(()=>l[7]||(l[7]=[r("查看")])),_:1,__:[7]})):c("",!0)]),_:1}),t(o,{label:"企业信息登记表"},{default:a(()=>[e.value.reg_form_path?(s(),i(d,{key:0,type:"primary",onClick:l[1]||(l[1]=_=>m(e.value.reg_form_path))},{default:a(()=>l[8]||(l[8]=[r("查看")])),_:1,__:[8]})):c("",!0)]),_:1})]),_:1})]),_:1}),t(v,{class:"detail-card"},{default:a(()=>[t(g,{column:3,border:""},{default:a(()=>[t(o,{label:"管理员类型"},{default:a(()=>[r(n(e.value.manager_type||"-"),1)]),_:1}),t(o,{label:"姓名"},{default:a(()=>[r(n(e.value.manager_name||"-"),1)]),_:1}),t(o,{label:"身份证号"},{default:a(()=>[r(n(e.value.manager_id_card||"-"),1)]),_:1}),t(o,{label:"手机号"},{default:a(()=>[r(n(e.value.manager_mobile||"-"),1)]),_:1}),t(o,{label:"身份证正面"},{default:a(()=>[e.value.manager_head_photo_path?(s(),i(d,{key:0,type:"primary",onClick:l[2]||(l[2]=_=>m(e.value.manager_head_photo_path))},{default:a(()=>l[9]||(l[9]=[r("查看")])),_:1,__:[9]})):c("",!0)]),_:1}),t(o,{label:"身份证反面"},{default:a(()=>[e.value.manager_background_path?(s(),i(d,{key:0,type:"primary",onClick:l[3]||(l[3]=_=>m(e.value.manager_background_path))},{default:a(()=>l[10]||(l[10]=[r("查看")])),_:1,__:[10]})):c("",!0)]),_:1}),t(o,{label:"审核时间"},{default:a(()=>[r(n(e.value.manager_auditor_time||"未审核"),1)]),_:1}),t(o,{label:"审核状态"},{default:a(()=>[t(x,{type:C(e.value.manager_audit_status)},{default:a(()=>[r(n(e.value.manager_audit_status||"未审核"),1)]),_:1},8,["type"])]),_:1})]),_:1})]),_:1}),e.value.logs&&e.value.logs.length>0?(s(),i(v,{key:0,class:"detail-card"},{default:a(()=>[t($,null,{default:a(()=>[(s(!0),B(W,null,X(e.value.logs,_=>(s(),i(S,{key:_.id,timestamp:k(b)(_.created_at),type:F(_.action)},{default:a(()=>[f("div",ue,[f("span",se,n(_.admin_name),1),f("span",ie,n(_.content),1)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})]),_:1})):c("",!0)])}}},xe=H(de,[["__scopeId","data-v-49165e20"]]);export{xe as default};
