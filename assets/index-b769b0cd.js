import{_ as H}from"./index-b0a522d4.js";/* empty css                *//* empty css               *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                        */import{g as K,q as T,t as Q}from"./caxt-7e710c82.js";import{r as d,b as E,ae as Y,l as p,B,F as e,G as a,p as A,S as j,ag as z,C as n,O as g,H as h,I,u as J,D as L,E as q,K as W,aG as Z,a6 as ee,ao as le,ax as ae,ay as te,ah as oe,a5 as re,a7 as se,b3 as ne,b4 as ue}from"./element-plus-e9590f8a.js";const de={class:"transfer-page"},me={class:"card-header"},ie={class:"xml-container"},pe={class:"language-xml"},_e={class:"xml-container"},fe={class:"language-xml"},ce={__name:"index",setup(ge){const x=d(),w=d(),r=E({amount:1e4,rivalBankCode:"",rivalAccntNo:"",rivalAccntName:"",innerFlag:"N",summary:"",note:""}),m=E({bankCode:"",seqNo:""}),C=d([]),$={amount:[{required:!0,message:"请输入转账金额",trigger:"blur"},{type:"number",min:1,message:"金额必须大于0",trigger:"blur"}],rivalBankCode:[{required:!0,message:"请选择对方银行代码",trigger:"change"}],rivalAccntNo:[{required:!0,message:"请输入对方账号",trigger:"blur"},{min:1,max:32,message:"账号长度在1-32位之间",trigger:"blur"}],rivalAccntName:[{required:!0,message:"请输入对方账号名称",trigger:"blur"},{min:1,max:60,message:"账号名称长度在1-60位之间",trigger:"blur"}],innerFlag:[{required:!0,message:"请选择转账类型",trigger:"change"}]},M={bankCode:[{required:!0,message:"请选择银行代码",trigger:"change"}],seqNo:[{required:!0,message:"请输入交易流水号",trigger:"blur"},{min:1,max:30,message:"流水号长度在1-30位之间",trigger:"blur"}]},N=d(!1),v=d(!1),_=d(!1),b=d("request"),i=E({request:"",response:""}),D=async()=>{try{await x.value.validate(),N.value=!0;const{data:o}=await Q(r);q.success("转账请求已提交"),i.request=o.request,i.response=o.response,_.value=!0,b.value="request"}catch(o){console.error("转账失败:",o),q.error("转账失败: "+(o.message||"未知错误"))}finally{N.value=!1}},S=async()=>{try{await w.value.validate(),v.value=!0;const{data:o}=await T(m);q.success("查询成功"),i.request=o.request,i.response=o.response,_.value=!0,b.value="response"}catch(o){console.error("查询失败:",o),q.error("查询失败: "+(o.message||"未知错误"))}finally{v.value=!1}},G=()=>{var o,l;(o=x.value)==null||o.resetFields(),(l=w.value)==null||l.resetFields(),_.value=!1},O=async()=>{try{const{data:o}=await K();C.value=o||[]}catch(o){console.error("加载银行代码失败:",o)}};return Y(()=>{O()}),(o,l)=>{const f=W,P=Z,s=ee,u=le,y=ae,k=te,V=oe,c=re,U=se,F=z,R=ne,X=ue;return p(),B("div",de,[e(F,{class:"transfer-card"},{header:a(()=>[n("div",me,[l[12]||(l[12]=n("span",null,"信托转账测试",-1)),e(f,{type:"primary",onClick:G},{default:a(()=>l[11]||(l[11]=[g("重置表单")])),_:1,__:[11]})])]),default:a(()=>[e(U,{ref_key:"transferFormRef",ref:x,model:r,rules:$,"label-width":"120px",class:"transfer-form"},{default:a(()=>[e(V,{gutter:20},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(s,{label:"转账金额",prop:"amount"},{default:a(()=>[e(P,{modelValue:r.amount,"onUpdate:modelValue":l[0]||(l[0]=t=>r.amount=t),min:1,precision:0,step:100,placeholder:"请输入转账金额（分）",style:{width:"100%"}},null,8,["modelValue"]),l[13]||(l[13]=n("div",{class:"form-tip"},"金额单位为分，如10000表示100元",-1))]),_:1,__:[13]})]),_:1}),e(u,{span:12},{default:a(()=>[e(s,{label:"行内转账标志",prop:"innerFlag"},{default:a(()=>[e(k,{modelValue:r.innerFlag,"onUpdate:modelValue":l[1]||(l[1]=t=>r.innerFlag=t),placeholder:"请选择转账类型",style:{width:"100%"}},{default:a(()=>[e(y,{label:"同行转账",value:"Y"}),e(y,{label:"跨行转账",value:"N"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,{gutter:20},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(s,{label:"对方银行代码",prop:"rivalBankCode"},{default:a(()=>[e(k,{modelValue:r.rivalBankCode,"onUpdate:modelValue":l[2]||(l[2]=t=>r.rivalBankCode=t),placeholder:"请选择对方银行",style:{width:"100%"},filterable:""},{default:a(()=>[(p(!0),B(h,null,I(C.value,t=>(p(),A(y,{key:t.code,label:`${t.code} - ${t.name}`,value:t.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(s,{label:"对方账号",prop:"rivalAccntNo"},{default:a(()=>[e(c,{modelValue:r.rivalAccntNo,"onUpdate:modelValue":l[3]||(l[3]=t=>r.rivalAccntNo=t),placeholder:"请输入对方账号",maxlength:"32","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,{gutter:20},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(s,{label:"对方账号名称",prop:"rivalAccntName"},{default:a(()=>[e(c,{modelValue:r.rivalAccntName,"onUpdate:modelValue":l[4]||(l[4]=t=>r.rivalAccntName=t),placeholder:"请输入对方账号名称",maxlength:"60","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(s,{label:"摘要",prop:"summary"},{default:a(()=>[e(c,{modelValue:r.summary,"onUpdate:modelValue":l[5]||(l[5]=t=>r.summary=t),placeholder:"请输入摘要信息",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{label:"附言",prop:"note"},{default:a(()=>[e(c,{modelValue:r.note,"onUpdate:modelValue":l[6]||(l[6]=t=>r.note=t),type:"textarea",rows:3,placeholder:"请输入附言信息",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(f,{type:"primary",onClick:D,loading:N.value},{default:a(()=>l[14]||(l[14]=[g(" 执行转账 ")])),_:1,__:[14]},8,["loading"]),e(f,{onClick:J(T),loading:v.value},{default:a(()=>l[15]||(l[15]=[g(" 查询转账 ")])),_:1,__:[15]},8,["onClick","loading"])]),_:1})]),_:1},8,["model"])]),_:1}),e(F,{class:"query-card",style:{"margin-top":"20px"}},{header:a(()=>l[16]||(l[16]=[n("span",null,"转账查询",-1)])),default:a(()=>[e(U,{ref_key:"queryFormRef",ref:w,model:m,rules:M,"label-width":"120px",class:"query-form"},{default:a(()=>[e(V,{gutter:20},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(s,{label:"银行代码",prop:"bankCode"},{default:a(()=>[e(k,{modelValue:m.bankCode,"onUpdate:modelValue":l[7]||(l[7]=t=>m.bankCode=t),placeholder:"请选择银行",style:{width:"100%"},filterable:""},{default:a(()=>[(p(!0),B(h,null,I(C.value,t=>(p(),A(y,{key:t.code,label:`${t.code} - ${t.name}`,value:t.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(s,{label:"交易流水号",prop:"seqNo"},{default:a(()=>[e(c,{modelValue:m.seqNo,"onUpdate:modelValue":l[8]||(l[8]=t=>m.seqNo=t),placeholder:"请输入交易流水号",maxlength:"30","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(f,{type:"primary",onClick:S,loading:v.value},{default:a(()=>l[17]||(l[17]=[g(" 查询转账状态 ")])),_:1,__:[17]},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),_.value?(p(),A(F,{key:0,class:"result-card",style:{"margin-top":"20px"}},{header:a(()=>[l[19]||(l[19]=n("span",null,"接口调用结果",-1)),e(f,{type:"text",style:{float:"right",padding:"0"},onClick:l[9]||(l[9]=t=>_.value=!1)},{default:a(()=>l[18]||(l[18]=[g(" 关闭 ")])),_:1,__:[18]})]),default:a(()=>[e(X,{modelValue:b.value,"onUpdate:modelValue":l[10]||(l[10]=t=>b.value=t),type:"border-card"},{default:a(()=>[e(R,{label:"请求XML",name:"request"},{default:a(()=>[n("div",ie,[n("pre",null,[n("code",pe,L(i.request),1)])])]),_:1}),e(R,{label:"响应XML",name:"response"},{default:a(()=>[n("div",_e,[n("pre",null,[n("code",fe,L(i.response),1)])])]),_:1})]),_:1},8,["modelValue"])]),_:1})):j("",!0)])}}},ke=H(ce,[["__scopeId","data-v-e72b5cec"]]);export{ke as default};
