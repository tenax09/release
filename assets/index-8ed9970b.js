import{_ as E,u as B,a as F}from"./index-2885c76a.js";import{b as C,r as i,l as c,B as I,C as g,F as o,G as s,a7 as R,u as n,V as K,a1 as N,ab as U,p as v,ac as q,ad as S,O as h,E as x,a2 as G,a5 as L,a6 as M,K as O}from"./element-plus-b8725afa.js";const T={class:"login-container"},$={class:"login-box"},j={__name:"index",setup(z){const y=B(),b=F(),t=C({username:"",password:""}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"用户名长度在 2 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码不能少于 6 个字符",trigger:"blur"}]},p=i(null),u=i(!1),l=i(!1),m=()=>{var d;(d=p.value)==null||d.validate(async e=>{if(e){u.value=!0;try{const a=await b.login(t.username,t.password);console.log("登录成功:",a),x.success("登录成功"),y.replace("/dashboard")}catch(a){console.error("登录失败:",a),x.error(a.message||"登录失败")}finally{u.value=!1}}})};return(d,e)=>{const a=G,_=L,f=M,V=O,k=R;return c(),I("div",T,[g("div",$,[e[4]||(e[4]=g("div",{class:"title"},"保险分期管理系统",-1)),o(k,{ref_key:"loginFormRef",ref:p,model:t,rules:w,class:"login-form",autocomplete:"on","label-position":"left"},{default:s(()=>[o(f,{prop:"username"},{default:s(()=>[o(_,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=r=>t.username=r),placeholder:"用户名",type:"text",tabindex:"1",autocomplete:"on"},{prefix:s(()=>[o(a,null,{default:s(()=>[o(n(K))]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(f,{prop:"password"},{default:s(()=>[o(_,{modelValue:t.password,"onUpdate:modelValue":e[2]||(e[2]=r=>t.password=r),placeholder:"密码",type:l.value?"text":"password",tabindex:"2",autocomplete:"on",onKeyup:N(m,["enter"])},{prefix:s(()=>[o(a,null,{default:s(()=>[o(n(U))]),_:1})]),suffix:s(()=>[o(a,{class:"cursor-pointer",onClick:e[1]||(e[1]=r=>l.value=!l.value)},{default:s(()=>[l.value?(c(),v(n(q),{key:0})):(c(),v(n(S),{key:1}))]),_:1})]),_:1},8,["modelValue","type"])]),_:1}),o(V,{loading:u.value,type:"primary",class:"login-button",onClick:m},{default:s(()=>e[3]||(e[3]=[h(" 登录 ")])),_:1,__:[3]},8,["loading"])]),_:1},8,["model"])])])}}},H=E(j,[["__scopeId","data-v-f558edc3"]]);export{H as default};
